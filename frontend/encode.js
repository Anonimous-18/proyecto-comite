const customCharset = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
const bitsPerGroup = 6;

function encodeCustomBase64String(text) {
  let binaryString = '';
  for (let i = 0; i < text.length; i++) {
    const charCode = text.charCodeAt(i);
    // Convierte el valor del carácter en una representación binaria de 16 bits.
    const binaryValue = charCode.toString(2).padStart(16, '0');
    binaryString += binaryValue;
  }

  let encoded = '';
  for (let i = 0; i < binaryString.length; i += bitsPerGroup) {
    let chunk = binaryString.slice(i, i + bitsPerGroup);
    while (chunk.length < bitsPerGroup) {
      chunk += '0'; // Añadir bits de relleno si es necesario
    }
    const decimalValue = parseInt(chunk, 2);
    encoded += customCharset[decimalValue];
  }

  return encoded;
}

function decodeCustomBase64String(encodedText) {
  let decoded = '';
  for (let i = 0; i < encodedText.length; i++) {
    const char = encodedText[i];
    const decimalValue = customCharset.indexOf(char);
    const binaryValue = decimalValue.toString(2).padStart(bitsPerGroup, '0');
    decoded += binaryValue;
  }

  let text = '';
  for (let i = 0; i < decoded.length; i += 16) {
    const binaryValue = decoded.slice(i, i + 16);
    const charCode = parseInt(binaryValue, 2);
    text += String.fromCharCode(charCode);
  }

  return text;
}

// Ejemplo de uso
// const originalText = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyIjp7ImlkIjoyLCJub21icmVfY29tcGxldG8iOiJCcmF5YW4gR29tZXogTm9ndWVyYSIsImVtYWlsIjoiYmVnb21lejMzNEBnbWFpbC5jb20iLCJjcmVhZG8iOiIyMDIzLTEwLTE5VDE2OjMwOjI2LjAwMFoiLCJ0aXBvX2RvY3VtZW50byI6IkNDIiwiZG9jdW1lbnRvIjoiMSIsInJvbF9pZCI6MSwicGVybWlzb3MiOlt7ImlkIjoyLCJub21icmUiOiJjcmVhdGUtcm9sZXMiLCJjcmVhZG8iOiIyMDIzLTA4LTI4VDE1OjU4OjM1LjAwMFoiLCJyb2xlc19wZXJtaXNvcyI6eyJpZCI6MSwicm9sX2lkIjoxLCJwZXJtaXNvc19pZCI6MiwiY3JlYXRlZEF0IjoiMjAyMy0xMC0wN1QyMDozNTo1MS4wMDBaIiwidXBkYXRlZEF0IjoiMjAyMy0xMC0wN1QyMDozNTo1MS4wMDBaIn19LHsiaWQiOjMsIm5vbWJyZSI6ImVkaXQtcm9sZXMiLCJjcmVhZG8iOiIyMDIzLTA4LTI4VDE1OjU4OjM1LjAwMFoiLCJyb2xlc19wZXJtaXNvcyI6eyJpZCI6Miwicm9sX2lkIjoxLCJwZXJtaXNvc19pZCI6MywiY3JlYXRlZEF0IjoiMjAyMy0xMC0wN1QyMDozNTo1MS4wMDBaIiwidXBkYXRlZEF0IjoiMjAyMy0xMC0wN1QyMDozNTo1MS4wMDBaIn19LHsiaWQiOjEsIm5vbWJyZSI6Imxpc3Qtcm9sZXMiLCJjcmVhZG8iOiIyMDIzLTA4LTI4VDE1OjU4OjM1LjAwMFoiLCJyb2xlc19wZXJtaXNvcyI6eyJpZCI6Mywicm9sX2lkIjoxLCJwZXJtaXNvc19pZCI6MSwiY3JlYXRlZEF0IjpudWxsLCJ1cGRhdGVkQXQiOm51bGx9fSx7ImlkIjo0LCJub21icmUiOiJkZWxldGUtcm9sZXMiLCJjcmVhZG8iOiIyMDIzLTA4LTI4VDE1OjU4OjM1LjAwMFoiLCJyb2xlc19wZXJtaXNvcyI6eyJpZCI6NCwicm9sX2lkIjoxLCJwZXJtaXNvc19pZCI6NCwiY3JlYXRlZEF0IjpudWxsLCJ1cGRhdGVkQXQiOm51bGx9fSx7ImlkIjo1LCJub21icmUiOiJsaXN0LXBlcm1pc29zIiwiY3JlYWRvIjoiMjAyMy0xMC0xOVQyMzo0OToxMi4wMDBaIiwicm9sZXNfcGVybWlzb3MiOnsiaWQiOjUsInJvbF9pZCI6MSwicGVybWlzb3NfaWQiOjUsImNyZWF0ZWRBdCI6IjIwMjMtMTAtMTlUMjM6NDk6MjkuMDAwWiIsInVwZGF0ZWRBdCI6IjIwMjMtMTAtMTlUMjM6NDk6MjkuMDAwWiJ9fV19LCJpYXQiOjE2OTc5OTcwMDEsImV4cCI6MTY5ODAwMDYwMX0.Q9B2vFLrM358g9LofS-V2tnjUKrfNz3OOBgwkAG3-no';
const encodedText = "06K0UG1A06W0OW1706C0QG1F06a0IW1905K0UW190340JW1f04a0Sm1906u0KW0r06C0Gm1903O0IG1h0700M01M04C0IW0v02u0PG1v04e0CG1Z0380LW1v04a0QW1m03S0IG1j06m0Qm1906e0Rm1v04m0Gm1A07K0OW0o0340QG1Z06q0LW1c05a0CW0v07G0Om1707W0R01a04S0E01f04y0QG1A04C0Om1j04O0DG1P05S0D01d0580CW0v07G0MW1O06y0Pm1K06q0EG1k06G0Lm1M07a0MG1J04a0Sm1906q0LW1q05a0Lm1i07C0IG1g06y0QG1P06q0LW1k0680CW0n06m0PG1g04q0UW1E04K0GW1k0680Lm160700OW1303K0QW1Y0380C01f04m0Gm1A06e0Om1j05O0Q01Q04S0E01f04y0QG1907a0JG1404a0UW1C05G0HG1t04m0L01503K0LW1404K0CW1F06e0JG1t04y0QW190380J01g0440Tm1D04O0Rm1f04m0Gm1A0300OG1O0480TW1O0380KW1s05a0Cm1M07G0MW1N03K0C01Y07a0IG0s04a0Qm1E04G0IG1f07S0QG1Q04S0EG1g06G0Lm0n06m0OW1k0580TW1906e0Rm1f04q0Km1907C0IG1k04e0TW1Y04O0EG1m05e0Gm1903O0JG1J07S0QG1Z04S0LW1v0680Lm1i07e0OW0p04q0QG1F06m0T00t04a0RG1i06i0IG1g06y0UG1C04C0IW1r0680CW0n06a0Om1j05K0QG1F06a0IW1g06C0RG1M06W0P01705K0T01Z06q0EG1p05e0M01D06a0J01304e0QW1Z06q0LW1e05e0Hm0u06a0Jm1f04a0UG1D04G0IG1w04m0L01103G0J01K04a0D01M04G0HG0n04y0QW1L03G0Jm1g04q0CG1C06e0GG1t04q0HW1l06a0J01304e0UG1Y0380U01i06C0CG0v07S0MW1O04e0T01X05W0JW1s06C0UG1903O0PG1v04e0S01Q04C0IG0s04q0Km1t06a0Om1j03a0Sm1O0380R01h04a0QW1l07W0J01304e0Tm1Q05W0IW1q0640M01E07O0Om0n03a0S01Q04C0IG0s04q0QG1t06a0MG0p04e0R01P05W0KW1i05e0HG160300IG1g06y0QG1D06e0GG1v04q0UG0m07W0JG130300Tm1E0340KG1v04q0H01l07e0JW1K06y0CG1D05C0D01t04q0H0120640IG1f07S0QG1a05W0GW1h05a0M01I06m0MW1504O0C01906e0Rm1f04q0QW1107a0JG1v0300U01D04C0C01t04u0CG1H07a0JG1406y0UW1E05G0Rm0n04q0Km0q07S0JG140480OG1906u0CG0v04m0I01p06a0OG1N0540QG1F06e0JG1p04a0RG0r07O0OW1N04e0UG1Q05C0IG0s04a0RG1M06i0OG1O0540T01Z06q0EG1p05e0M01D06a0J01304e0QW1Z06q0LW1e05e0Hm0u06a0Jm1f04a0UG1D04G0IG1w04m0L01103G0J01K04a0D01M04G0HG0n04y0QW1L03G0Jm1g04q0CG1C06e0GG1t04q0HW1l06a0J01304e0UG1Y0380U01i06C0CG0v07S0MW1O04e0T01X05W0JW1s06C0UG1903O0PG1v04e0S01Q04C0IG0s04q0QG1t06a0Om1j03a0Sm1O0380R01h04a0QW1l07W0J01304e0Tm1Q05W0IW1q0640M01E07O0Om0n03a0S01Q04C0IG0s04q0UG1t06a0MG0p04e0R01P05W0KW1i05e0HG160300IG1g06y0QG1D06e0GG1v04q0UG0m07W0JG130300Tm1E0340KG1v04q0H01l07e0JW1K06y0CG1D05C0D01t04q0H0120640IG1f07S0QG1a05W0GW1h05a0M01I06m0MW1504O0C01906e0Rm1f04q0QW1107a0JG1v0300U01D04C0C01t04u0CG1H07a0JG1406y0UW1E05G0Rm0n04q0Km0q07S0JG140480OG1906u0CG0v04m0I01p06a0OG1N0540QG1F06e0HG1p04a0RG0r07O0OW1N04e0UG1Q05C0IG0s04a0RG1u0700Om0p0540T01Z06q0EG1p05e0M01D06a0J01304e0QW1Z06q0LW1e05e0Hm0u06a0Jm1f04a0UG1D04G0IG1w04m0L01103G0J01K04a0D01M04G0HG0n04y0QW1L03G0Jm1g04q0CG1C06e0GG1t04q0HW1l06a0J01304e0UG1Y0380U01i06C0CG0v07S0MW1O04e0T01X05W0JW1s06C0UG1903O0PG1v04e0S01Q04C0IG0s04q0UG1t06a0Om1j03a0Sm1O0380R01h04a0QW1l07W0J01304e0Tm1Q05W0IW1q0640M01E07O0Om0n03a0S01Q04C0IG0s04q0Km1t06a0MG0p04e0R01P05W0KW1i05e0HG160300IG1g0700TG1a05S0U01p04m0Gm1A0340Om170580Q01a04S0LW1h0540M01H06a0Jm1j03K0CG1Y04S0U00v06O0Km1u03S0IG1j06m0Qm1906e0Rm0m04m0Gm1A07K0OW0o0340QG1Z06q0LG1f04y0QG1A06i0MW1N07W0R01a04S0LG1q06C0RG0v07C0MW1O04q0QG1C04C0IW1g06C0RG1M06W0MW1703W0QG1F06a0IG1v04q0H01907e0J01K0440D01C05G0IG0q05O0H0150340Jm1g05K0D01F06e0JG0n04m0QW1107S0JG1606y0QG1C04C0IW1v0680CW1u06m0Om0n03a0Tm1Q05W0IW1q0640M01E07O0Om1v04a0DW1b07a0IW1m05e0Gm1903O0JW1307S0QG1Z06q0EG1p05W0CW1i06i0IG1g06y0U01C04C0IW1t05e0M01A07G0OG1O04u0TW1Z0340EG1m05e0Gm1903O0JW1307S0QG1P03C0IW1i05a0M01I06m0MW1504O0C01906e0S01r06G0Lm1u07C0J01304e0CG1Z04S0KW1e06G0Hm1M06i0KG1O0540QG1F06q0DG0n0680Hm1u03a0PW1J07W0Dm1906q0R01h04a0QW1l0340J01304e0TG1Y0380CG1f06C0RG1L06a0Jm1f04e0Sm1X05W0JW0m04m0M01206m0Om1j0340S01Z0380EG1w04a0QG1t06a0MG0p04e0R01P05S0KW1s04a0QW1l06a0JG1g0440UG1D07a0C01u04q0Gm0m07W0Jm1M0540UG1D07e0Rm0m04y0L01l07W0JG1f03G0Tm1D04G0GW1X04a0QG1t06a0Om1j03a0Sm1Q05W0JW1c06C0Hm1M07a0OW1N06m0UW1Y03C0JG1f04y0RW1p06a0OG1N0540QG1F06e0LG1p04a0RW1A07O0OW1603a0S01Q04C0IG0s04q0Km1t06a0Om1705O0UG1Y05S0R01w0680Cm1E06O0OG1N0540QG1F06e0LG1p04a0RG1E07a0MW1N04O0C01Q05S0KW1206G0Gm1903O0IG1g04a0Tm1D06e0JG1q04q0L01107G0JG1K06m0LG1D06e0JG0s04u0H01h03O0JG1g06i0TG1D04G0GG1t05S0QG1907C0IG1k05O0Tm1Q04S0HW0m05e0Lm1I0480P01304a0DW1906e0IG1t04q0QW1D07G0JG1K0440T01D05G0R01L04q0QW1D03O0JW1406i0DW1D06e0Qm1r04q0H01107S0Lm1f04e0EG1c05O0CG0v04m0Gm1A0700MG1O0540QG1F06e0HG0o04y0L01d07S0JG1404K0CG1D05G0IG1p04a0RG1M03G0Om1304a0DW1D05G0MG0r04y0H01107S0JW1K04K0U01D06u0C00k0780R01E05C0Cm1604e0EG1704m0RW1s0300LG1D06S0IG0r04a0S01h06K0CG1q04W0OW1K06W0I01M06K0LW1Y04K0HW1F0580Hm0q07O0Q01I054x"
// console.log('Encoded:', encodedText);

const decodedText = decodeCustomBase64String(encodedText);
console.log(decodedText);